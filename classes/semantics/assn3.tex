\documentclass{article}
\usepackage{mmm}
\usepackage{sample}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{fullpage}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{define}{Definition}



\begin{document}

\title{Assignment 3}
\author{Sam Tobin-Hochstadt}

\newmeta\e{e}

\maketitle


\subsection*{Problem 1}

Let $\P1 = \mathtt{Y\ (\l f.\l x. \l y.if\ (zero?\ x)\ y\ (+1\ (f\
  (-1\ x)\ y)))}$.

Then we would like to prove

\begin{theorem}
If $\e1 \rightarrow^* \c{n}$ and $\e2 \rightarrow^* \c{m}$ then $(\P1\
\e1\ \e2) \rightarrow^* \c{n+m}.$
\end{theorem}

\begin{proof}
  We prove this by induction on $n$.  

\paragraph{Base Case}  Here $n=0$.  Then, the test in the conditional
will be true, and therefore $(\P1\
\e1\ \e2) \rightarrow^* \e2 \rightarrow^* \c{m} = \c{0+m}$.

\paragraph{Inductive Step} Here we assume that our hypothesis is true
for all $k \leq n$.  We prove the fact at $n+1$.  Since $n+1 > 0$, the
test in the conditional must be false.  Therefore, we are left with
the following term: $(+1\ (\P1\ (-1\ x)\ y))$.  By the induction
hypothesis at $n$, we have that $(\P1\ (-1\ x)\ y) \rightarrow^*
\c{n+m}$.  Therefore,  $(+1\ (\P1\ (-1\ x)\ y)) \rightarrow^* (+1\
\c{n+m}) \rightarrow \c{n+1+m}$.

\end{proof}

\subsection*{Problem 2}


Let $\P2 = \mathtt{Y\ (\l f.\l x. \l y.if\ (zero?\ x)\ y\ (f\
  (-1\ x)\ (+1\ y))))}$.

Then we would like to prove

\begin{theorem}
If $\e1 \rightarrow^* \c{n}$ and $\e2 \rightarrow^* \c{m}$ then $(\P2\
\e1\ \e2) \rightarrow^* \c{n+m}.$
\end{theorem}

\begin{proof}
  We prove this by induction on $n$.  

\paragraph{Base Case}  Here $n=0$.  Then, the test in the conditional
will be true, and therefore $(\P1\
\e1\ \e2) \rightarrow^* \e2 \rightarrow^* \c{m} = \c{0+m}$.

\paragraph{Inductive Step} Here we assume that our hypothesis is true
for all $k \leq n$.  We prove the fact at $n+1$.  Since $n+1 > 0$, the
test in the conditional must be false.  Therefore, we are left with
the following term: $(\P2\ (-1\ x)\ (+1\ y))$.  But the induction
hypothesis at $n$, we have that $(\P2\ (-1\ x)\ (+1\ y)) \rightarrow^*
\c{n+m+1}$.  

\end{proof}

\newcommand\red{\rightarrow^*} 
\newcommand\app[2]{(#1\ #2)}
\newcommand\PP[1]{\app{\P{}}{#1}}

\newpage

\subsection*{Problem 3}

Consider the following function: $\P{} = \mathtt{Y(\l f.\l x.\ if\ (>\
  x\ 100)\ (-\ x\ 10)\ (f\ (f\ (+\ x\ 11))))}$.

\begin{theorem}
   If $\e{} \red \c{n}$, and $\PP{\e{}} \red \c{k}$ then the following holds:
   \begin{enumerate}
   \item if $n > 100$, then $k = n-10$
   \item otherwise, $k = 91$ 
   \end{enumerate}


\end{theorem}

\begin{proof}

It is obvious by inspection that for any $\e{} \rightarrow^* \c{k}$
where $k \geq 100$, $(P\ k) \rightarrow^* \c{k-10}$.  

Further, since we are only considering the cases when the function
terminates, and the computation produces no other side effects, we can
treat the semantics as if they were applicative-order.  This
simplifies the reasoning process. 


Then, consider $90 \leq k \leq 100$.  In this case, $\PP{k}
\red \PP{\PP {(k+11)}} \red \PP{(k+1)}$ since $k+11>100$.  Therefore,
$\PP{k} \red \PP{101} \red 91$.

Alternatively, $k < 90$.  Then $k+11 \leq 100$.  Therefore, $\PP{k}
\red \PP{\PP{k+11}}$.  Now, if $k+11 \geq 90$, the previous discussion
applies, and $\PP{\PP{k+11}} \red \PP{91} \red 91$.  So, we have that
$\PP{k} \red 91$ if $k \geq 79$.  But if $k+11 \geq 79$, then  by
the foregoing discussion, $\PP{k+11} \red 91$ and therefore
$\PP{\PP{k+11}} \red 91$.  Therefore, $\PP{k} \red 91$ if $k \geq 68$.

Identical arguments prove that $\PP{k} \red 91$ if $k \geq 57$, and if
$k \geq 46$, and if $k \geq 35$, and if $k \geq 24$, and if $k \geq
13$, and if $k \geq 2$.  If $k = 1$ or $k = 0$, then $PP{k} \red
\PP{\PP{k+11}}$.  Since $k+11 = 12$ or $11$ respectively,
$\PP{\PP{k+11}} \red 91$.  

\end{proof}

\end{document}